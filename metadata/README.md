# multipart_image_augmentation

### Описание свойств
Перед запуском необходимо составить словари с классами, типами объектов и свойствами для каждого объекта.
Примеры находятся в `metadata.py`
Нулевой класс считается дефолтным для каждого свойства или класса.
object_classes - содержит все названия классов
object_type - типы объектов
properties - все свойсва, которые могут всречаться в датасете. У каждого типа свойсва могут быть разные свойства, например, свойство здоровье, которое может состоять из здоровый, больной, гнилой и пр. Первый всегда дефолтный.
object_type2properties - какие типы свойств могут быть у конкретного объкта. `{id_obj: [properties1, properties2, ..., properties_n]}`. Если у какого-то типа не может быть данныого свойства, то его обозначают как -1.

#### Добавление названий классов в аннотацию
Если в аннотации нет tags с классом, то его можно добавить вручную, используя .csv файл, с названиями изображений и соответствующим классом, на изображении.
Пример:

`grape_1.jpg,grape`

Необходимо вызвать метод `update_annotation.add_class_name(path_annotation, df_path)`
path_annotation - путь к директории с аннотациями без классов
df_path - путь к .csv файлу с классами



### Запуск
`python main.py --path-ann ./ann/ --all-ann /all_metadata.json`

где path-an - путь к файлм с аннотацией
all-ann - имя файла для аннотации датасета

В результате, в директорию, где была аннотация записывается новая аннотация для каждого изображения. И получаем единый файл методанных для всего датасета, в котором собрана статистика по всем свойствам, классам и типам объектам.



